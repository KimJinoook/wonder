# 계정찾기
- 아이디 찾기
- ajax를 활용하여, 가입되어있는 아이디를 찾는다.



findUserId 메서드를 활용하여, member 테이블에 저장된 데이터 중 이름, 이메일이 일치하는 member를 select 한다.

```html
    <select id="findUserId" parameterType="memberVo" resultType="memberVo">
      select * from member where name=#{name} and email=#{email}
   </select>
```

```java
	@RequestMapping("/member/ajaxFindUserId")
	@ResponseBody
	public Map<String, Object> ajaxFindUserId(@ModelAttribute MemberVO vo) {
		logger.info("ajax 아이디 조회 파라미터 vo={}",vo);
		
		MemberVO vo2=memberService.findUserId(vo);
		logger.info("찾은 아이디 vo2={}",vo2);
		
		Map<String, Object> map = new HashMap<>();

		map.put("msg", "찾으시는 아이디가 없습니다..");
		map.put("SUCCESS", false);
		if(vo2!=null) {
			map.put("msg", vo2.getUserId());
			map.put("SUCCESS", true);
		}
		
		return map;
	}

```
- script 구문

```javascript
<script type="text/javascript" src="<c:url value='/js/jquery-3.6.0.min.js'/>"></script>
<script type="text/javascript">

	$(function(){
		$("#findUserId").click(function(){
			var name = $("#userName").val();
			var email = $("#userEmail").val();
			
			var output="";
			
			$.ajax({
				type: "post",
				url : "/wonder/member/ajaxFindUserId",
				dataType : "json",
				data : {"name":name, "email":email},
				success : function(res){
						console.log(res);

						output=res.msg;
						document.querySelector("#chkId").innerText =output;
						if(res.SUCCESS) {
							$("#resBtn").html("<button onClick=resIdPass()>사용하기</button>");
						}else{
							$("#resBtn").html("");
						}
						
					},
					error : function(xhr, status, error) {
	                  alert("error:" + error);
					}
			});
		});
		
	});	
	

	function resIdPass() {
		$(opener.document).find('#loginId').val(document.querySelector("#chkId").innerText);
		
		self.close();
	}
```
